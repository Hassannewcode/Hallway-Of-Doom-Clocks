<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hall of Clocks - Every Timezone, City & Country</title>
  <link rel="icon" href="favicon.ico" />
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet"/>
  
  <!-- GSAP + ScrollTrigger -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
  
  <!-- Locomotive Scroll -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/locomotive-scroll@4.1.4/dist/locomotive-scroll.min.css"/>
  <script src="https://cdn.jsdelivr.net/npm/locomotive-scroll@4.1.4/dist/locomotive-scroll.min.js"></script>
  
  <style>
    /* Reset & base */
    *, *::before, *::after {
      box-sizing: border-box;
    }
    html, body {
      margin: 0; padding: 0;
      background: #0a111f;
      color: #e0e6f1;
      font-family: 'Inter', sans-serif;
      overflow-x: hidden;
      height: 100%;
    }
    
    /* Loader */
    .loader {
      position: fixed;
      inset: 0;
      background: #0a111f;
      color: #00d7ff;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 2.5rem;
      font-weight: 700;
      letter-spacing: 0.15em;
      z-index: 9999;
      user-select: none;
    }
    
    /* Custom Cursor */
    .custom-cursor {
      position: fixed;
      top: 0; left: 0;
      width: 20px; height: 20px;
      background: #00d7ff;
      border-radius: 50%;
      pointer-events: none;
      mix-blend-mode: difference;
      transition: transform 0.15s ease, background-color 0.3s ease;
      z-index: 10000;
      transform: translate3d(-50%, -50%, 0);
    }
    a:hover ~ .custom-cursor,
    button:hover ~ .custom-cursor,
    .clock-card:hover ~ .custom-cursor,
    .clock-card.focused ~ .custom-cursor {
      transform: translate3d(-50%, -50%, 0) scale(2);
      background-color: #00fff5;
    }
    
    /* Header & Title */
    header {
      padding: 2rem 4vw 1rem;
      background: linear-gradient(90deg, #001d27, #003246);
      box-shadow: 0 2px 15px #001d27aa;
      position: sticky;
      top: 0;
      z-index: 5000;
      display: flex;
      justify-content: space-between;
      align-items: center;
      user-select: none;
    }
    header h1 {
      margin: 0;
      font-weight: 700;
      font-size: clamp(1.8rem, 3vw, 2.8rem);
      letter-spacing: 0.08em;
      color: #00d7ff;
    }
    
    /* Search bar */
    #search-input {
      font-size: 1rem;
      padding: 0.6rem 1rem;
      border-radius: 999px;
      border: none;
      outline: none;
      width: 260px;
      max-width: 80vw;
      background: #031721;
      color: #00d7ff;
      box-shadow: 0 0 8px #00d7ff88;
      transition: box-shadow 0.3s ease;
    }
    #search-input::placeholder {
      color: #004860;
    }
    #search-input:focus {
      box-shadow: 0 0 12px #00ffffcc;
    }
    
    /* Settings button */
    #settings-toggle {
      font-size: 1.6rem;
      background: none;
      border: none;
      color: #00d7ff;
      cursor: pointer;
      padding: 0.3rem 0.6rem;
      border-radius: 6px;
      transition: background-color 0.25s ease;
    }
    #settings-toggle:hover,
    #settings-toggle:focus {
      background-color: #003f56;
      outline: none;
    }
    
    /* Settings panel */
    #settings-panel {
      position: fixed;
      bottom: 1.8rem;
      right: 1.8rem;
      background: #001f2e;
      border-radius: 10px;
      padding: 1rem 1.4rem;
      box-shadow: 0 0 20px #00d7ffaa;
      font-size: 0.95rem;
      color: #00d7ff;
      width: 280px;
      max-width: 90vw;
      display: none;
      z-index: 10001;
      user-select: none;
    }
    #settings-panel label {
      display: flex;
      align-items: center;
      margin-bottom: 1rem;
      cursor: pointer;
    }
    #settings-panel label span {
      flex: 1;
      user-select: none;
    }
    #settings-panel input[type="checkbox"] {
      margin-left: 0.8rem;
      width: 18px;
      height: 18px;
      cursor: pointer;
    }
    
    /* Sound toggle */
    #sound-toggle {
      margin-top: 0.2rem;
      font-weight: 700;
      font-size: 1rem;
      background: #003f56;
      border: none;
      color: #00d7ff;
      padding: 0.4rem 0.8rem;
      border-radius: 8px;
      cursor: pointer;
      user-select: none;
      transition: background-color 0.3s ease;
    }
    #sound-toggle:hover,
    #sound-toggle:focus {
      background-color: #005e7c;
      outline: none;
    }
    
    /* Main container */
    main {
      padding: 1rem 4vw 4rem;
      max-width: 1200px;
      margin: auto;
      min-height: 90vh;
      outline: none;
    }
    
    /* Clocks grid */
    #clocks-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.2rem;
      margin-top: 1.8rem;
      outline: none;
    }
    
    /* Clock card */
    .clock-card {
      background: #001f2e;
      border-radius: 12px;
      padding: 1rem 1.2rem 1.5rem;
      box-shadow: 0 0 10px #00d7ff88;
      transition: box-shadow 0.3s ease, transform 0.3s ease;
      cursor: pointer;
      user-select: none;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      outline-offset: 2px;
    }
    .clock-card:hover,
    .clock-card.focused {
      box-shadow: 0 0 22px #00fff5dd;
      transform: scale(1.04);
      z-index: 10;
      outline: none;
    }
    
    /* Location text */
    .location {
      font-size: 1.25rem;
      font-weight: 700;
      color: #00d7ff;
      margin-bottom: 0.15rem;
      user-select: text;
    }
    /* Country text */
    .country {
      font-size: 1rem;
      font-weight: 600;
      color: #00a9cc;
      margin-bottom: 0.8rem;
      user-select: text;
    }
    /* Timezone text */
    .timezone-label {
      font-size: 0.8rem;
      font-weight: 400;
      color: #0088aa;
      user-select: text;
      margin-top: 0.8rem;
    }
    
    /* Highlighted search */
    .highlight {
      background-color: #004860;
      border-radius: 3px;
      padding: 0 4px;
      color: #00ffff;
    }
    
    /* Digital clock style */
    .digital-clock {
      font-family: 'Courier New', Courier, monospace;
      font-size: 1.8rem;
      letter-spacing: 0.06em;
      color: #00ffff;
      user-select: none;
      text-shadow:
        0 0 6px #00d7ff,
        0 0 12px #00d7ffaa;
      margin-bottom: 0.6rem;
    }
    
    /* Analog clock canvas */
    canvas.clock-canvas {
      user-select: none;
      margin-bottom: 0.6rem;
      filter: drop-shadow(0 0 5px #00d7ff99);
      border-radius: 50%;
      background: #011523;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }
    
    /* Responsive */
    @media (max-width: 600px) {
      #clocks-container {
        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
        gap: 1rem;
      }
      .digital-clock {
        font-size: 1.2rem;
      }
      .location {
        font-size: 1rem;
      }
      .country {
        font-size: 0.85rem;
      }
    }
  </style>
</head>
<body>
  <div class="loader" role="alert" aria-live="assertive" aria-busy="true">Loading Clocks...</div>
  <div class="custom-cursor"></div>
  
  <header>
    <h1>Hall of Clocks</h1>
    <input id="search-input" type="search" aria-label="Search cities, countries, or timezones" placeholder="Search timezones, cities, countries..." autocomplete="off" />
    <button id="settings-toggle" aria-label="Open settings panel" aria-haspopup="true" aria-expanded="false" title="Settings ‚öôÔ∏è">‚öôÔ∏è</button>
  </header>
  
  <main id="main-content" tabindex="-1" data-scroll-container>
    <section id="clocks-container" role="list" aria-live="polite" aria-relevant="additions"></section>
  </main>
  
  <aside id="settings-panel" aria-label="Settings Panel" role="region" aria-hidden="true" tabindex="-1">
    <label for="toggle-12h"><span>Use 12-hour format</span><input type="checkbox" id="toggle-12h" aria-checked="false" /></label>
    <label for="toggle-analog"><span>Use Analog clocks</span><input type="checkbox" id="toggle-analog" aria-checked="false" /></label>
    <button id="sound-toggle" aria-pressed="false" aria-label="Toggle sound">üîà Sound Off</button>
  </aside>
  
  <script>
    // Timezones dataset - partial sample, add more or replace with full dataset as needed
    const timezones = [
      // Africa
      {zone:"Africa/Abidjan", country:"C√¥te d'Ivoire", city:"Abidjan"},
      {zone:"Africa/Accra", country:"Ghana", city:"Accra"},
      {zone:"Africa/Addis_Ababa", country:"Ethiopia", city:"Addis Ababa"},
      {zone:"Africa/Algiers", country:"Algeria", city:"Algiers"},
      {zone:"Africa/Asmara", country:"Eritrea", city:"Asmara"},
      {zone:"Africa/Bamako", country:"Mali", city:"Bamako"},
      {zone:"Africa/Bangui", country:"Central African Republic", city:"Bangui"},
      {zone:"Africa/Banjul", country:"Gambia", city:"Banjul"},
      {zone:"Africa/Bissau", country:"Guinea-Bissau", city:"Bissau"},
      {zone:"Africa/Blantyre", country:"Malawi", city:"Blantyre"},
      {zone:"Africa/Brazzaville", country:"Republic of the Congo", city:"Brazzaville"},
      {zone:"Africa/Bujumbura", country:"Burundi", city:"Bujumbura"},
      {zone:"Africa/Cairo", country:"Egypt", city:"Cairo"},
      {zone:"Africa/Casablanca", country:"Morocco", city:"Casablanca"},
      {zone:"Africa/Ceuta", country:"Spain", city:"Ceuta"},
      {zone:"Africa/Conakry", country:"Guinea", city:"Conakry"},
      {zone:"Africa/Dakar", country:"Senegal", city:"Dakar"},
      {zone:"Africa/Dar_es_Salaam", country:"Tanzania", city:"Dar es Salaam"},
      {zone:"Africa/Djibouti", country:"Djibouti", city:"Djibouti"},
      {zone:"Africa/Douala", country:"Cameroon", city:"Douala"},
      {zone:"Africa/El_Aaiun", country:"Western Sahara", city:"El Aaiun"},
      {zone:"Africa/Freetown", country:"Sierra Leone", city:"Freetown"},
      {zone:"Africa/Gaborone", country:"Botswana", city:"Gaborone"},
      {zone:"Africa/Harare", country:"Zimbabwe", city:"Harare"},
      {zone:"Africa/Johannesburg", country:"South Africa", city:"Johannesburg"},
      {zone:"Africa/Juba", country:"South Sudan", city:"Juba"},
      {zone:"Africa/Kampala", country:"Uganda", city:"Kampala"},
      {zone:"Africa/Khartoum", country:"Sudan", city:"Khartoum"},
      {zone:"Africa/Kigali", country:"Rwanda", city:"Kigali"},
      {zone:"Africa/Kinshasa", country:"Democratic Republic of the Congo", city:"Kinshasa"},
      {zone:"Africa/Lagos", country:"Nigeria", city:"Lagos"},
      {zone:"Africa/Libreville", country:"Gabon", city:"Libreville"},
      {zone:"Africa/Lome", country:"Togo", city:"Lome"},
      {zone:"Africa/Luanda", country:"Angola", city:"Luanda"},
      {zone:"Africa/Lubumbashi", country:"Democratic Republic of the Congo", city:"Lubumbashi"},
      {zone:"Africa/Lusaka", country:"Zambia", city:"Lusaka"},
      {zone:"Africa/Malabo", country:"Equatorial Guinea", city:"Malabo"},
      {zone:"Africa/Maputo", country:"Mozambique", city:"Maputo"},
      {zone:"Africa/Maseru", country:"Lesotho", city:"Maseru"},
      {zone:"Africa/Mbabane", country:"Eswatini", city:"Mbabane"},
      {zone:"Africa/Mogadishu", country:"Somalia", city:"Mogadishu"},
      {zone:"Africa/Monrovia", country:"Liberia", city:"Monrovia"},
      {zone:"Africa/Nairobi", country:"Kenya", city:"Nairobi"},
      {zone:"Africa/Ndjamena", country:"Chad", city:"Ndjamena"},
      {zone:"Africa/Niamey", country:"Niger", city:"Niamey"},
      {zone:"Africa/Nouakchott", country:"Mauritania", city:"Nouakchott"},
      {zone:"Africa/Ouagadougou", country:"Burkina Faso", city:"Ouagadougou"},
      {zone:"Africa/Porto-Novo", country:"Benin", city:"Porto-Novo"},
      {zone:"Africa/Sao_Tome", country:"S√£o Tom√© and Pr√≠ncipe", city:"Sao Tome"},
      {zone:"Africa/Tripoli", country:"Libya", city:"Tripoli"},
      {zone:"Africa/Tunis", country:"Tunisia", city:"Tunis"},
      {zone:"Africa/Windhoek", country:"Namibia", city:"Windhoek"},
      // America
      {zone:"America/Adak", country:"USA", city:"Adak"},
      {zone:"America/Anchorage", country:"USA", city:"Anchorage"},
      {zone:"America/Anguilla", country:"Anguilla", city:"Anguilla"},
      {zone:"America/Antigua", country:"Antigua and Barbuda", city:"Antigua"},
      {zone:"America/Araguaina", country:"Brazil", city:"Araguaina"},
      {zone:"America/Argentina/Buenos_Aires", country:"Argentina", city:"Buenos Aires"},
      {zone:"America/Argentina/Catamarca", country:"Argentina", city:"Catamarca"},
      {zone:"America/Argentina/Cordoba", country:"Argentina", city:"Cordoba"},
      {zone:"America/Argentina/Jujuy", country:"Argentina", city:"Jujuy"},
      {zone:"America/Argentina/La_Rioja", country:"Argentina", city:"La Rioja"},
      {zone:"America/Argentina/Mendoza", country:"Argentina", city:"Mendoza"},
      {zone:"America/Argentina/Rio_Gallegos", country:"Argentina", city:"Rio Gallegos"},
      {zone:"America/Argentina/Salta", country:"Argentina", city:"Salta"},
      {zone:"America/Argentina/San_Juan", country:"Argentina", city:"San Juan"},
      {zone:"America/Argentina/San_Luis", country:"Argentina", city:"San Luis"},
      {zone:"America/Argentina/Tucuman", country:"Argentina", city:"Tucuman"},
      {zone:"America/Argentina/Ushuaia", country:"Argentina", city:"Ushuaia"},
      {zone:"America/Aruba", country:"Aruba", city:"Aruba"},
      {zone:"America/Asuncion", country:"Paraguay", city:"Asuncion"},
      {zone:"America/Atikokan", country:"Canada", city:"Atikokan"},
      {zone:"America/Bahia", country:"Brazil", city:"Bahia"},
      {zone:"America/Bahia_Banderas", country:"Mexico", city:"Bahia Banderas"},
      {zone:"America/Barbados", country:"Barbados", city:"Barbados"},
      {zone:"America/Belem", country:"Brazil", city:"Belem"},
      {zone:"America/Belize", country:"Belize", city:"Belize"},
      {zone:"America/Blanc-Sablon", country:"Canada", city:"Blanc-Sablon"},
      {zone:"America/Boa_Vista", country:"Brazil", city:"Boa Vista"},
      {zone:"America/Bogota", country:"Colombia", city:"Bogota"},
      {zone:"America/Boise", country:"USA", city:"Boise"},
      {zone:"America/Cambridge_Bay", country:"Canada", city:"Cambridge Bay"},
      {zone:"America/Campo_Grande", country:"Brazil", city:"Campo Grande"},
      {zone:"America/Cancun", country:"Mexico", city:"Cancun"},
      {zone:"America/Caracas", country:"Venezuela", city:"Caracas"},
      {zone:"America/Cayenne", country:"French Guiana", city:"Cayenne"},
      {zone:"America/Cayman", country:"Cayman Islands", city:"Cayman"},
      {zone:"America/Chicago", country:"USA", city:"Chicago"},
      {zone:"America/Chihuahua", country:"Mexico", city:"Chihuahua"},
      {zone:"America/Costa_Rica", country:"Costa Rica", city:"Costa Rica"},
      {zone:"America/Creston", country:"Canada", city:"Creston"},
      {zone:"America/Cuiaba", country:"Brazil", city:"Cuiaba"},
      {zone:"America/Curacao", country:"Cura√ßao", city:"Curacao"},
      {zone:"America/Danmarkshavn", country:"Greenland", city:"Danmarkshavn"},
      {zone:"America/Dawson", country:"Canada", city:"Dawson"},
      {zone:"America/Dawson_Creek", country:"Canada", city:"Dawson Creek"},
      {zone:"America/Denver", country:"USA", city:"Denver"},
      {zone:"America/Detroit", country:"USA", city:"Detroit"},
      {zone:"America/Dominica", country:"Dominica", city:"Dominica"},
      {zone:"America/Edmonton", country:"Canada", city:"Edmonton"},
      {zone:"America/Eirunepe", country:"Brazil", city:"Eirunepe"},
      {zone:"America/El_Salvador", country:"El Salvador", city:"El Salvador"},
      {zone:"America/Fort_Nelson", country:"Canada", city:"Fort Nelson"},
      {zone:"America/Fortaleza", country:"Brazil", city:"Fortaleza"},
      {zone:"America/Glace_Bay", country:"Canada", city:"Glace Bay"},
      {zone:"America/Godthab", country:"Greenland", city:"Godthab"},
      {zone:"America/Goose_Bay", country:"Canada", city:"Goose Bay"},
      {zone:"America/Grand_Turk", country:"Turks and Caicos Islands", city:"Grand Turk"},
      {zone:"America/Grenada", country:"Grenada", city:"Grenada"},
      {zone:"America/Guadeloupe", country:"Guadeloupe", city:"Guadeloupe"},
      {zone:"America/Guatemala", country:"Guatemala", city:"Guatemala"},
      {zone:"America/Guayaquil", country:"Ecuador", city:"Guayaquil"},
      {zone:"America/Guyana", country:"Guyana", city:"Guyana"},
      {zone:"America/Halifax", country:"Canada", city:"Halifax"},
      {zone:"America/Havana", country:"Cuba", city:"Havana"},
      {zone:"America/Hermosillo", country:"Mexico", city:"Hermosillo"},
      {zone:"America/Indiana/Indianapolis", country:"USA", city:"Indianapolis"},
      {zone:"America/Indiana/Knox", country:"USA", city:"Knox"},
      {zone:"America/Indiana/Marengo", country:"USA", city:"Marengo"},
      {zone:"America/Indiana/Petersburg", country:"USA", city:"Petersburg"},
      {zone:"America/Indiana/Tell_City", country:"USA", city:"Tell City"},
      {zone:"America/Indiana/Vevay", country:"USA", city:"Vevay"},
      {zone:"America/Indiana/Vincennes", country:"USA", city:"Vincennes"},
      {zone:"America/Indiana/Winamac", country:"USA", city:"Winamac"},
      {zone:"America/Inuvik", country:"Canada", city:"Inuvik"},
      {zone:"America/Iqaluit", country:"Canada", city:"Iqaluit"},
      {zone:"America/Jamaica", country:"Jamaica", city:"Jamaica"},
      {zone:"America/Juneau", country:"USA", city:"Juneau"},
      {zone:"America/Kentucky/Louisville", country:"USA", city:"Louisville"},
      {zone:"America/Kentucky/Monticello", country:"USA", city:"Monticello"},
      {zone:"America/Kralendijk", country:"Bonaire, Sint Eustatius and Saba", city:"Kralendijk"},
      {zone:"America/La_Paz", country:"Bolivia", city:"La Paz"},
      {zone:"America/Lima", country:"Peru", city:"Lima"},
      {zone:"America/Los_Angeles", country:"USA", city:"Los Angeles"},
      {zone:"America/Lower_Princes", country:"Sint Maarten", city:"Lower Princes"},
      {zone:"America/Maceio", country:"Brazil", city:"Maceio"},
      {zone:"America/Managua", country:"Nicaragua", city:"Managua"},
      {zone:"America/Manaus", country:"Brazil", city:"Manaus"},
      {zone:"America/Marigot", country:"Saint Martin", city:"Marigot"},
      {zone:"America/Martinique", country:"Martinique", city:"Martinique"},
      {zone:"America/Matamoros", country:"Mexico", city:"Matamoros"},
      {zone:"America/Mazatlan", country:"Mexico", city:"Mazatlan"},
      {zone:"America/Menominee", country:"USA", city:"Menominee"},
      {zone:"America/Merida", country:"Mexico", city:"Merida"},
      {zone:"America/Metlakatla", country:"USA", city:"Metlakatla"},
      {zone:"America/Mexico_City", country:"Mexico", city:"Mexico City"},
      {zone:"America/Miquelon", country:"Saint Pierre and Miquelon", city:"Miquelon"},
      {zone:"America/Moncton", country:"Canada", city:"Moncton"},
      {zone:"America/Monterrey", country:"Mexico", city:"Monterrey"},
      {zone:"America/Montevideo", country:"Uruguay", city:"Montevideo"},
      {zone:"America/Montreal", country:"Canada", city:"Montreal"},
      {zone:"America/Montserrat", country:"Montserrat", city:"Montserrat"},
      {zone:"America/Nassau", country:"Bahamas", city:"Nassau"},
      {zone:"America/New_York", country:"USA", city:"New York"},
      {zone:"America/Nipigon", country:"Canada", city:"Nipigon"},
      {zone:"America/Nome", country:"USA", city:"Nome"},
      {zone:"America/Noronha", country:"Brazil", city:"Noronha"},
      {zone:"America/North_Dakota/Beulah", country:"USA", city:"Beulah"},
      {zone:"America/North_Dakota/Center", country:"USA", city:"Center"},
      {zone:"America/North_Dakota/New_Salem", country:"USA", city:"New Salem"},
      {zone:"America/Ojinaga", country:"Mexico", city:"Ojinaga"},
      {zone:"America/Panama", country:"Panama", city:"Panama"},
      {zone:"America/Pangnirtung", country:"Canada", city:"Pangnirtung"},
      {zone:"America/Paramaribo", country:"Suriname", city:"Paramaribo"},
      {zone:"America/Phoenix", country:"USA", city:"Phoenix"},
      {zone:"America/Port-au-Prince", country:"Haiti", city:"Port-au-Prince"},
      {zone:"America/Port_of_Spain", country:"Trinidad and Tobago", city:"Port of Spain"},
      {zone:"America/Porto_Velho", country:"Brazil", city:"Porto Velho"},
      {zone:"America/Puerto_Rico", country:"Puerto Rico", city:"Puerto Rico"},
      {zone:"America/Rainy_River", country:"Canada", city:"Rainy River"},
      {zone:"America/Rankin_Inlet", country:"Canada", city:"Rankin Inlet"},
      {zone:"America/Recife", country:"Brazil", city:"Recife"},
      {zone:"America/Regina", country:"Canada", city:"Regina"},
      {zone:"America/Resolute", country:"Canada", city:"Resolute"},
      {zone:"America/Rio_Branco", country:"Brazil", city:"Rio Branco"},
      {zone:"America/Santarem", country:"Brazil", city:"Santarem"},
      {zone:"America/Santiago", country:"Chile", city:"Santiago"},
      {zone:"America/Santo_Domingo", country:"Dominican Republic", city:"Santo Domingo"},
      {zone:"America/Sao_Paulo", country:"Brazil", city:"Sao Paulo"},
      {zone:"America/Scoresbysund", country:"Greenland", city:"Scoresbysund"},
      {zone:"America/Sitka", country:"USA", city:"Sitka"},
      {zone:"America/St_Barthelemy", country:"Saint Barthelemy", city:"St Barthelemy"},
      {zone:"America/St_Johns", country:"Canada", city:"St Johns"},
      {zone:"America/St_Kitts", country:"Saint Kitts and Nevis", city:"St Kitts"},
      {zone:"America/St_Lucia", country:"Saint Lucia", city:"St Lucia"},
      {zone:"America/St_Thomas", country:"U.S. Virgin Islands", city:"St Thomas"},
      {zone:"America/St_Vincent", country:"Saint Vincent and the Grenadines", city:"St Vincent"},
      {zone:"America/Swift_Current", country:"Canada", city:"Swift Current"},
      {zone:"America/Tegucigalpa", country:"Honduras", city:"Tegucigalpa"},
      {zone:"America/Thule", country:"Greenland", city:"Thule"},
      {zone:"America/Thunder_Bay", country:"Canada", city:"Thunder Bay"},
      {zone:"America/Tijuana", country:"Mexico", city:"Tijuana"},
      {zone:"America/Toronto", country:"Canada", city:"Toronto"},
      {zone:"America/Tortola", country:"British Virgin Islands", city:"Tortola"},
      {zone:"America/Vancouver", country:"Canada", city:"Vancouver"},
      {zone:"America/Whitehorse", country:"Canada", city:"Whitehorse"},
      {zone:"America/Winnipeg", country:"Canada", city:"Winnipeg"},
      {zone:"America/Yakutat", country:"USA", city:"Yakutat"},
      {zone:"America/Yellowknife", country:"Canada", city:"Yellowknife"},
      // Antarctica
      {zone:"Antarctica/Casey", country:"Antarctica", city:"Casey"},
      {zone:"Antarctica/Davis", country:"Antarctica", city:"Davis"},
      {zone:"Antarctica/DumontDUrville", country:"Antarctica", city:"Dumont d'Urville"},
      {zone:"Antarctica/Macquarie", country:"Antarctica", city:"Macquarie"},
      {zone:"Antarctica/Mawson", country:"Antarctica", city:"Mawson"},
      {zone:"Antarctica/Palmer", country:"Antarctica", city:"Palmer"},
      {zone:"Antarctica/Rothera", country:"Antarctica", city:"Rothera"},
      {zone:"Antarctica/Syowa", country:"Antarctica", city:"Syowa"},
      {zone:"Antarctica/Troll", country:"Antarctica", city:"Troll"},
      {zone:"Antarctica/Vostok", country:"Antarctica", city:"Vostok"},
      // Asia
      {zone:"Asia/Aden", country:"Yemen", city:"Aden"},
      {zone:"Asia/Almaty", country:"Kazakhstan", city:"Almaty"},
      {zone:"Asia/Amman", country:"Jordan", city:"Amman"},
      {zone:"Asia/Anadyr", country:"Russia", city:"Anadyr"},
      {zone:"Asia/Aqtau", country:"Kazakhstan", city:"Aqtau"},
      {zone:"Asia/Aqtobe", country:"Kazakhstan", city:"Aqtobe"},
      {zone:"Asia/Ashgabat", country:"Turkmenistan", city:"Ashgabat"},
      {zone:"Asia/Baghdad", country:"Iraq", city:"Baghdad"},
      {zone:"Asia/Bahrain", country:"Bahrain", city:"Bahrain"},
      {zone:"Asia/Baku", country:"Azerbaijan", city:"Baku"},
      {zone:"Asia/Bangkok", country:"Thailand", city:"Bangkok"},
      {zone:"Asia/Barnaul", country:"Russia", city:"Barnaul"},
      {zone:"Asia/Beirut", country:"Lebanon", city:"Beirut"},
      {zone:"Asia/Bishkek", country:"Kyrgyzstan", city:"Bishkek"},
      {zone:"Asia/Brunei", country:"Brunei", city:"Brunei"},
      {zone:"Asia/Chita", country:"Russia", city:"Chita"},
      {zone:"Asia/Choibalsan", country:"Mongolia", city:"Choibalsan"},
      {zone:"Asia/Colombo", country:"Sri Lanka", city:"Colombo"},
      {zone:"Asia/Damascus", country:"Syria", city:"Damascus"},
      {zone:"Asia/Dhaka", country:"Bangladesh", city:"Dhaka"},
      {zone:"Asia/Dili", country:"Timor-Leste", city:"Dili"},
      {zone:"Asia/Dubai", country:"UAE", city:"Dubai"},
      {zone:"Asia/Dushanbe", country:"Tajikistan", city:"Dushanbe"},
      {zone:"Asia/Famagusta", country:"Cyprus", city:"Famagusta"},
      {zone:"Asia/Gaza", country:"Palestine", city:"Gaza"},
      {zone:"Asia/Hebron", country:"Palestine", city:"Hebron"},
      {zone:"Asia/Ho_Chi_Minh", country:"Vietnam", city:"Ho Chi Minh"},
      {zone:"Asia/Hong_Kong", country:"Hong Kong", city:"Hong Kong"},
      {zone:"Asia/Hovd", country:"Mongolia", city:"Hovd"},
      {zone:"Asia/Irkutsk", country:"Russia", city:"Irkutsk"},
      {zone:"Asia/Jakarta", country:"Indonesia", city:"Jakarta"},
      {zone:"Asia/Jayapura", country:"Indonesia", city:"Jayapura"},
      {zone:"Asia/Jerusalem", country:"Israel", city:"Jerusalem"},
      {zone:"Asia/Kabul", country:"Afghanistan", city:"Kabul"},
      {zone:"Asia/Kamchatka", country:"Russia", city:"Kamchatka"},
      {zone:"Asia/Karachi", country:"Pakistan", city:"Karachi"},
      {zone:"Asia/Kathmandu", country:"Nepal", city:"Kathmandu"},
      {zone:"Asia/Khandyga", country:"Russia", city:"Khandyga"},
      {zone:"Asia/Kolkata", country:"India", city:"Kolkata"},
      {zone:"Asia/Krasnoyarsk", country:"Russia", city:"Krasnoyarsk"},
      {zone:"Asia/Kuala_Lumpur", country:"Malaysia", city:"Kuala Lumpur"},
      {zone:"Asia/Kuching", country:"Malaysia", city:"Kuching"},
      {zone:"Asia/Macau", country:"China", city:"Macau"},
      {zone:"Asia/Magadan", country:"Russia", city:"Magadan"},
      {zone:"Asia/Makassar", country:"Indonesia", city:"Makassar"},
      {zone:"Asia/Manila", country:"Philippines", city:"Manila"},
      {zone:"Asia/Muscat", country:"Oman", city:"Muscat"},
      {zone:"Asia/Nicosia", country:"Cyprus", city:"Nicosia"},
      {zone:"Asia/Novokuznetsk", country:"Russia", city:"Novokuznetsk"},
      {zone:"Asia/Novosibirsk", country:"Russia", city:"Novosibirsk"},
      {zone:"Asia/Omsk", country:"Russia", city:"Omsk"},
      {zone:"Asia/Oral", country:"Kazakhstan", city:"Oral"},
      {zone:"Asia/Phnom_Penh", country:"Cambodia", city:"Phnom Penh"},
      {zone:"Asia/Pontianak", country:"Indonesia", city:"Pontianak"},
      {zone:"Asia/Pyongyang", country:"North Korea", city:"Pyongyang"},
      {zone:"Asia/Qatar", country:"Qatar", city:"Qatar"},
      {zone:"Asia/Qostanay", country:"Kazakhstan", city:"Qostanay"},
      {zone:"Asia/Qyzylorda", country:"Kazakhstan", city:"Qyzylorda"},
      {zone:"Asia/Riyadh", country:"Saudi Arabia", city:"Riyadh"},
      {zone:"Asia/Sakhalin", country:"Russia", city:"Sakhalin"},
      {zone:"Asia/Samarkand", country:"Uzbekistan", city:"Samarkand"},
      {zone:"Asia/Seoul", country:"South Korea", city:"Seoul"},
      {zone:"Asia/Shanghai", country:"China", city:"Shanghai"},
      {zone:"Asia/Singapore", country:"Singapore", city:"Singapore"},
      {zone:"Asia/Srednekolymsk", country:"Russia", city:"Srednekolymsk"},
      {zone:"Asia/Taipei", country:"Taiwan", city:"Taipei"},
      {zone:"Asia/Tashkent", country:"Uzbekistan", city:"Tashkent"},
      {zone:"Asia/Tbilisi", country:"Georgia", city:"Tbilisi"},
      {zone:"Asia/Tehran", country:"Iran", city:"Tehran"},
      {zone:"Asia/Thimphu", country:"Bhutan", city:"Thimphu"},
      {zone:"Asia/Tokyo", country:"Japan", city:"Tokyo"},
      {zone:"Asia/Tomsk", country:"Russia", city:"Tomsk"},
      {zone:"Asia/Ulaanbaatar", country:"Mongolia", city:"Ulaanbaatar"},
      {zone:"Asia/Urumqi", country:"China", city:"Urumqi"},
      {zone:"Asia/Ust-Nera", country:"Russia", city:"Ust-Nera"},
      {zone:"Asia/Vientiane", country:"Laos", city:"Vientiane"},
      {zone:"Asia/Vladivostok", country:"Russia", city:"Vladivostok"},
      {zone:"Asia/Yakutsk", country:"Russia", city:"Yakutsk"},
      {zone:"Asia/Yangon", country:"Myanmar", city:"Yangon"},
      {zone:"Asia/Yekaterinburg", country:"Russia", city:"Yekaterinburg"},
      {zone:"Asia/Yerevan", country:"Armenia", city:"Yerevan"},
      // Europe
      {zone:"Europe/Amsterdam", country:"Netherlands", city:"Amsterdam"},
      {zone:"Europe/Andorra", country:"Andorra", city:"Andorra"},
      {zone:"Europe/Astrakhan", country:"Russia", city:"Astrakhan"},
      {zone:"Europe/Athens", country:"Greece", city:"Athens"},
      {zone:"Europe/Belgrade", country:"Serbia", city:"Belgrade"},
      {zone:"Europe/Berlin", country:"Germany", city:"Berlin"},
      {zone:"Europe/Brussels", country:"Belgium", city:"Brussels"},
      {zone:"Europe/Bucharest", country:"Romania", city:"Bucharest"},
      {zone:"Europe/Budapest", country:"Hungary", city:"Budapest"},
      {zone:"Europe/Chisinau", country:"Moldova", city:"Chisinau"},
      {zone:"Europe/Copenhagen", country:"Denmark", city:"Copenhagen"},
      {zone:"Europe/Dublin", country:"Ireland", city:"Dublin"},
      {zone:"Europe/Gibraltar", country:"Gibraltar", city:"Gibraltar"},
      {zone:"Europe/Helsinki", country:"Finland", city:"Helsinki"},
      {zone:"Europe/Istanbul", country:"Turkey", city:"Istanbul"},
      {zone:"Europe/Kaliningrad", country:"Russia", city:"Kaliningrad"},
      {zone:"Europe/Kiev", country:"Ukraine", city:"Kiev"},
      {zone:"Europe/Kirov", country:"Russia", city:"Kirov"},
      {zone:"Europe/Lisbon", country:"Portugal", city:"Lisbon"},
      {zone:"Europe/Ljubljana", country:"Slovenia", city:"Ljubljana"},
      {zone:"Europe/London", country:"United Kingdom", city:"London"},
      {zone:"Europe/Luxembourg", country:"Luxembourg", city:"Luxembourg"},
      {zone:"Europe/Madrid", country:"Spain", city:"Madrid"},
      {zone:"Europe/Malta", country:"Malta", city:"Malta"},
      {zone:"Europe/Minsk", country:"Belarus", city:"Minsk"},
      {zone:"Europe/Monaco", country:"Monaco", city:"Monaco"},
      {zone:"Europe/Moscow", country:"Russia", city:"Moscow"},
      {zone:"Europe/Oslo", country:"Norway", city:"Oslo"},
      {zone:"Europe/Paris", country:"France", city:"Paris"},
      {zone:"Europe/Prague", country:"Czech Republic", city:"Prague"},
      {zone:"Europe/Riga", country:"Latvia", city:"Riga"},
      {zone:"Europe/Rome", country:"Italy", city:"Rome"},
      {zone:"Europe/Samara", country:"Russia", city:"Samara"},
      {zone:"Europe/Saratov", country:"Russia", city:"Saratov"},
      {zone:"Europe/Simferopol", country:"Ukraine", city:"Simferopol"},
      {zone:"Europe/Sofia", country:"Bulgaria", city:"Sofia"},
      {zone:"Europe/Stockholm", country:"Sweden", city:"Stockholm"},
      {zone:"Europe/Tallinn", country:"Estonia", city:"Tallinn"},
      {zone:"Europe/Tirane", country:"Albania", city:"Tirane"},
      {zone:"Europe/Ulyanovsk", country:"Russia", city:"Ulyanovsk"},
      {zone:"Europe/Uzhgorod", country:"Ukraine", city:"Uzhgorod"},
      {zone:"Europe/Vienna", country:"Austria", city:"Vienna"},
      {zone:"Europe/Vilnius", country:"Lithuania", city:"Vilnius"},
      {zone:"Europe/Volgograd", country:"Russia", city:"Volgograd"},
      {zone:"Europe/Warsaw", country:"Poland", city:"Warsaw"},
      {zone:"Europe/Zaporozhye", country:"Ukraine", city:"Zaporozhye"},
      {zone:"Europe/Zurich", country:"Switzerland", city:"Zurich"},
      // Indian Ocean
      {zone:"Indian/Chagos", country:"British Indian Ocean Territory", city:"Chagos"},
      {zone:"Indian/Christmas", country:"Christmas Island", city:"Christmas"},
      {zone:"Indian/Cocos", country:"Cocos Islands", city:"Cocos"},
      {zone:"Indian/Kerguelen", country:"Kerguelen Islands", city:"Kerguelen"},
      {zone:"Indian/Mahe", country:"Seychelles", city:"Mahe"},
      {zone:"Indian/Maldives", country:"Maldives", city:"Maldives"},
      {zone:"Indian/Mauritius", country:"Mauritius", city:"Mauritius"},
      {zone:"Indian/Reunion", country:"R√©union", city:"Reunion"},
      // Pacific
      {zone:"Pacific/Apia", country:"Samoa", city:"Apia"},
      {zone:"Pacific/Auckland", country:"New Zealand", city:"Auckland"},
      {zone:"Pacific/Chatham", country:"New Zealand", city:"Chatham"},
      {zone:"Pacific/Enderbury", country:"Phoenix Islands", city:"Enderbury"},
      {zone:"Pacific/Fakaofo", country:"Tokelau", city:"Fakaofo"},
      {zone:"Pacific/Fiji", country:"Fiji", city:"Fiji"},
      {zone:"Pacific/Funafuti", country:"Tuvalu", city:"Funafuti"},
      {zone:"Pacific/Galapagos", country:"Ecuador", city:"Galapagos"},
      {zone:"Pacific/Gambier", country:"French Polynesia", city:"Gambier"},
      {zone:"Pacific/Guadalcanal", country:"Solomon Islands", city:"Guadalcanal"},
      {zone:"Pacific/Guam", country:"Guam", city:"Guam"},
      {zone:"Pacific/Honolulu", country:"USA", city:"Honolulu"},
      {zone:"Pacific/Johnston", country:"USA", city:"Johnston"},
      {zone:"Pacific/Kiritimati", country:"Kiribati", city:"Kiritimati"},
      {zone:"Pacific/Kosrae", country:"Micronesia", city:"Kosrae"},
      {zone:"Pacific/Kwajalein", country:"Marshall Islands", city:"Kwajalein"},
      {zone:"Pacific/Majuro", country:"Marshall Islands", city:"Majuro"},
      {zone:"Pacific/Marquesas", country:"French Polynesia", city:"Marquesas"},
      {zone:"Pacific/Midway", country:"USA", city:"Midway"},
      {zone:"Pacific/Nauru", country:"Nauru", city:"Nauru"},
      {zone:"Pacific/Niue", country:"Niue", city:"Niue"},
      {zone:"Pacific/Norfolk", country:"Norfolk Island", city:"Norfolk"},
      {zone:"Pacific/Noumea", country:"New Caledonia", city:"Noumea"},
      {zone:"Pacific/Pago_Pago", country:"American Samoa", city:"Pago Pago"},
      {zone:"Pacific/Palau", country:"Palau", city:"Palau"},
      {zone:"Pacific/Pitcairn", country:"Pitcairn Islands", city:"Pitcairn"},
      {zone:"Pacific/Pohnpei", country:"Micronesia", city:"Pohnpei"},
      {zone:"Pacific/Port_Moresby", country:"Papua New Guinea", city:"Port Moresby"},
      {zone:"Pacific/Rarotonga", country:"Cook Islands", city:"Rarotonga"},
      {zone:"Pacific/Saipan", country:"Northern Mariana Islands", city:"Saipan"},
      {zone:"Pacific/Tahiti", country:"French Polynesia", city:"Tahiti"},
      {zone:"Pacific/Tarawa", country:"Kiribati", city:"Tarawa"},
      {zone:"Pacific/Tongatapu", country:"Tonga", city:"Tongatapu"},
      {zone:"Pacific/Wake", country:"Wake Island", city:"Wake"},
      {zone:"Pacific/Wallis", country:"Wallis and Futuna", city:"Wallis"}
    ];
    
    // Elements
    const clocksContainer = document.getElementById("clocks-container");
    const searchInput = document.getElementById("search-input");
    const settingsToggle = document.getElementById("settings-toggle");
    const settingsPanel = document.getElementById("settings-panel");
    const toggle12h = document.getElementById("toggle-12h");
    const toggleAnalog = document.getElementById("toggle-analog");
    const soundToggle = document.getElementById("sound-toggle");
    
    // LocalStorage keys
    const STORAGE_KEY_12H = "hallofclocks_12h_format";
    const STORAGE_KEY_ANALOG = "hallofclocks_analog";
    
    // States
    let is12HourFormat = JSON.parse(localStorage.getItem(STORAGE_KEY_12H)) || false;
    let isAnalogClock = JSON.parse(localStorage.getItem(STORAGE_KEY_ANALOG)) || false;
    let clocksIntervals = [];
    let isSoundOn = false;
    let audioCtx, oscillator;
    
    // Initialize UI states
    toggle12h.checked = is12HourFormat;
    toggleAnalog.checked = isAnalogClock;
    
    // Highlight search matches
    function highlightText(text, query) {
      if (!query) return text;
      const regex = new RegExp(`(${query.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')})`, "gi");
      return text.replace(regex, '<span class="highlight">$1</span>');
    }
    
    // Create digital clock element
    function createDigitalClock(zone, is12h) {
      const el = document.createElement("div");
      el.className = "digital-clock";
      function update() {
        try {
          const now = new Date();
          const options = {
            timeZone: zone,
            hour12: is12h,
            hour: "2-digit",
            minute: "2-digit",
            second: "2-digit",
          };
          const formatter = new Intl.DateTimeFormat([], options);
          el.textContent = formatter.format(now);
        } catch {
          el.textContent = "N/A";
        }
      }
      update();
      const interval = setInterval(update, 1000);
      return { el, interval };
    }
    
    // Create analog clock canvas element
    function createAnalogClock(zone, is12h) {
      const canvas = document.createElement("canvas");
      canvas.className = "clock-canvas";
      canvas.width = 130;
      canvas.height = 130;
      const ctx = canvas.getContext("2d");
    
      function drawClock() {
        const now = new Date();
        try {
          const parts = new Intl.DateTimeFormat("en-US", {
            timeZone: zone,
            hour12: is12h,
            hour: "numeric",
            minute: "numeric",
            second: "numeric",
          }).formatToParts(now);
          
          let h = 0, m = 0, s = 0;
          for (const part of parts) {
            if (part.type === "hour") h = parseInt(part.value);
            if (part.type === "minute") m = parseInt(part.value);
            if (part.type === "second") s = parseInt(part.value);
          }
          
          // Clear canvas
          ctx.clearRect(0, 0, canvas.width, canvas.height);
    
          // Draw background circle
          ctx.beginPath();
          ctx.arc(65, 65, 60, 0, Math.PI * 2);
          ctx.fillStyle = "#001824";
          ctx.fill();
    
          // Draw clock outline
          ctx.lineWidth = 5;
          ctx.strokeStyle = "#00d7ff";
          ctx.shadowColor = "#00d7ffbb";
          ctx.shadowBlur = 12;
          ctx.beginPath();
          ctx.arc(65, 65, 60, 0, Math.PI * 2);
          ctx.stroke();
    
          ctx.shadowBlur = 0;
    
          // Center
          ctx.translate(65, 65);
    
          // Draw hour marks
          ctx.strokeStyle = "#007ba7";
          ctx.lineWidth = 3;
          for (let i = 0; i < 12; i++) {
            ctx.beginPath();
            ctx.moveTo(50, 0);
            ctx.lineTo(58, 0);
            ctx.stroke();
            ctx.rotate(Math.PI / 6);
          }
    
          // Reset rotation
          ctx.rotate(-((Math.PI / 6) * 12));
    
          // Draw hands
          const secAngle = (Math.PI / 30) * s;
          const minAngle = (Math.PI / 30) * m + secAngle / 60;
          let hourValue = h;
          if (!is12h && hourValue >= 12) hourValue -= 12;
          const hourAngle = (Math.PI / 6) * hourValue + minAngle / 12;
    
          // Hour hand
          ctx.strokeStyle = "#00d7ff";
          ctx.lineWidth = 6;
          ctx.beginPath();
          ctx.moveTo(0, 0);
          ctx.lineTo(Math.cos(hourAngle - Math.PI / 2) * 35, Math.sin(hourAngle - Math.PI / 2) * 35);
          ctx.stroke();
    
          // Minute hand
          ctx.lineWidth = 4;
          ctx.beginPath();
          ctx.moveTo(0, 0);
          ctx.lineTo(Math.cos(minAngle - Math.PI / 2) * 50, Math.sin(minAngle - Math.PI / 2) * 50);
          ctx.stroke();
    
          // Second hand
          ctx.strokeStyle = "#ff4c4c";
          ctx.lineWidth = 2;
          ctx.beginPath();
          ctx.moveTo(0, 10);
          ctx.lineTo(Math.cos(secAngle - Math.PI / 2) * 55, Math.sin(secAngle - Math.PI / 2) * 55);
          ctx.stroke();
    
          // Center circle
          ctx.fillStyle = "#00d7ff";
          ctx.beginPath();
          ctx.arc(0, 0, 7, 0, Math.PI * 2);
          ctx.fill();
    
          ctx.resetTransform();
        } catch {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          ctx.fillStyle = "#ff4c4c";
          ctx.font = "14px monospace";
          ctx.textAlign = "center";
          ctx.fillText("Error", 65, 65);
        }
      }
      drawClock();
      const interval = setInterval(drawClock, 1000);
      return { el: canvas, interval };
    }
    
    // Render clocks
    function renderClocks(data, filter = "") {
      // Clear old clocks and intervals
      clocksIntervals.forEach(i => clearInterval(i));
      clocksIntervals = [];
      clocksContainer.innerHTML = "";
      filter = filter.toLowerCase();
    
      data.forEach(({zone, country, city}, idx) => {
        if (filter) {
          // Filter by city, country, or zone
          if (!zone.toLowerCase().includes(filter) &&
              !country.toLowerCase().includes(filter) &&
              !city.toLowerCase().includes(filter)) return;
        }
    
        const card = document.createElement("article");
        card.className = "clock-card";
        card.tabIndex = 0;
        card.setAttribute("role", "listitem");
        card.setAttribute("aria-label", `${city}, ${country} clock`);
    
        // Location
        const loc = document.createElement("div");
        loc.className = "location";
        loc.innerHTML = highlightText(city, filter);
        card.appendChild(loc);
    
        // Country
        const ctry = document.createElement("div");
        ctry.className = "country";
        ctry.innerHTML = highlightText(country, filter);
        card.appendChild(ctry);
    
        // Time display
        let clockObj;
        if (isAnalogClock) clockObj = createAnalogClock(zone, is12HourFormat);
        else clockObj = createDigitalClock(zone, is12HourFormat);
        card.appendChild(clockObj.el);
        clocksIntervals.push(clockObj.interval);
    
        // Timezone label
        const tzLabel = document.createElement("div");
        tzLabel.className = "timezone-label";
        tzLabel.textContent = zone.replace("_", " ");
        card.appendChild(tzLabel);
    
        clocksContainer.appendChild(card);
      });
    }
    
    // Search filtering
    searchInput.addEventListener("input", () => {
      renderClocks(timezones, searchInput.value.trim());
    });
    
    // Settings toggle
    settingsToggle.addEventListener("click", () => {
      const isVisible = settingsPanel.style.display === "block";
      settingsPanel.style.display = isVisible ? "none" : "block";
      settingsToggle.setAttribute("aria-expanded", isVisible ? "false" : "true");
      if (!isVisible) settingsPanel.focus();
    });
    
    // Settings checkboxes
    toggle12h.addEventListener("change", () => {
      is12HourFormat = toggle12h.checked;
      localStorage.setItem(STORAGE_KEY_12H, JSON.stringify(is12HourFormat));
      renderClocks(timezones, searchInput.value.trim());
    });
    toggleAnalog.addEventListener("change", () => {
      isAnalogClock = toggleAnalog.checked;
      localStorage.setItem(STORAGE_KEY_ANALOG, JSON.stringify(isAnalogClock));
      renderClocks(timezones, searchInput.value.trim());
    });
    
    // Sound toggle
    soundToggle.addEventListener("click", () => {
      if (isSoundOn) {
        stopSound();
      } else {
        startSound();
      }
    });
    
    function startSound() {
      if (isSoundOn) return;
      audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      oscillator = audioCtx.createOscillator();
      oscillator.type = "sine";
      oscillator.frequency.setValueAtTime(440, audioCtx.currentTime);
      oscillator.start();
      const gainNode = audioCtx.createGain();
      gainNode.gain.setValueAtTime(0.03, audioCtx.currentTime);
      oscillator.connect(gainNode);
      gainNode.connect(audioCtx.destination);
      isSoundOn = true;
      soundToggle.textContent = "üîä Sound On";
      soundToggle.setAttribute("aria-pressed", "true");
    }
    
    function stopSound() {
      if (!audioCtx) return;
      oscillator.stop();
      oscillator.disconnect();
      audioCtx.close();
      audioCtx = null;
      isSoundOn = false;
      soundToggle.textContent = "üîà Sound Off";
      soundToggle.setAttribute("aria-pressed", "false");
    }
    
    // Custom cursor movement
    const cursor = document.querySelector(".custom-cursor");
    window.addEventListener("mousemove", e => {
      cursor.style.transform = `translate3d(${e.clientX}px, ${e.clientY}px, 0) translate(-50%, -50%)`;
    });
    
    // Preloader & initial render
    window.addEventListener("load", () => {
      const loader = document.querySelector(".loader");
      loader.style.opacity = "0";
      setTimeout(() => loader.style.display = "none", 600);
      renderClocks(timezones);
    });
    
    // GSAP & Locomotive Scroll integration
    const scrollContainer = document.querySelector("[data-scroll-container]");
    const locoScroll = new LocomotiveScroll({
      el: scrollContainer,
      smooth: true,
      smartphone: { smooth: true },
      tablet: { smooth: true },
      getDirection: true,
      getSpeed: true,
    });
    locoScroll.on("scroll", ScrollTrigger.update);
    
    ScrollTrigger.scrollerProxy(scrollContainer, {
      scrollTop(value) {
        return arguments.length
          ? locoScroll.scrollTo(value, 0, 0)
          : locoScroll.scroll.instance.scroll.y;
      },
      getBoundingClientRect() {
        return { top: 0, left: 0, width: window.innerWidth, height: window.innerHeight };
      },
      pinType: scrollContainer.style.transform ? "transform" : "fixed",
    });
    
    ScrollTrigger.addEventListener("refresh", () => locoScroll.update());
    ScrollTrigger.refresh();
    
    // Animate header and clocks on load
    gsap.from("header h1", { opacity: 0, y: -20, duration: 1.2, ease: "power3.out" });
    gsap.from("#search-input", { opacity: 0, y: -20, duration: 1.2, delay: 0.15, ease: "power3.out" });
    gsap.from("#settings-toggle", { opacity: 0, y: -20, duration: 1.2, delay: 0.3, ease: "power3.out" });
    gsap.from("#clocks-container", { opacity: 0, y: 20, duration: 1.8, delay: 0.5, ease: "power3.out", stagger: 0.03 });
    
    // Animated tab title (cycles through)
    const titles = ["Hall of Clocks", "Every Timezone", "World Clock Hub"];
    let titleIndex = 0;
    setInterval(() => {
      document.title = titles[titleIndex];
      titleIndex = (titleIndex + 1) % titles.length;
    }, 3000);
  </script>
</body>
</html>
